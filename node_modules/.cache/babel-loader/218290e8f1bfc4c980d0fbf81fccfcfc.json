{"ast":null,"code":"var _jsxFileName = \"D:\\\\MSF\\\\MSF-FRONTEND\\\\lib\\\\src\\\\components\\\\files\\\\FileIndex.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport Http from '../../http/apiService';\nimport { StyleFileIndex } from './StyleFileIndex';\nimport Paper from '@material-ui/core/Paper';\nimport Grid from '@material-ui/core/Grid';\nimport { Button } from '@material-ui/core';\nimport { useHistory } from \"react-router-dom\";\nimport { TextField } from '@material-ui/core';\nimport Pagination from '@material-ui/lab/Pagination';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst FileIndex = props => {\n  _s();\n\n  let history = useHistory();\n  const [data, setData] = useState([]);\n  const [count, setCount] = useState();\n  const [page, setPage] = useState(1);\n  const [name, setName] = useState('');\n  const [size, setSize] = useState(0);\n  const [val, setVal] = useState({\n    name: '',\n    size: 0\n  });\n\n  const GetFile = async () => {\n    const resp = await Http.getSth('/files?page=1');\n    setData(resp.data.fileModel);\n    let page = Math.floor(resp.data.count / 6);\n\n    if (resp.data.count % 6 !== 0) {\n      page = page + 1;\n    }\n\n    setCount(page);\n  };\n\n  const downLoad = async id => {\n    if (localStorage.getItem('username') === null) {\n      alert('You need to log in to download files');\n      history.push('/');\n    } else {\n      const url = 'http://localhost:9191/files/' + localStorage.getItem('username') + '/download/' + id;\n      window.open(url, \"_blank\");\n    }\n  };\n\n  const viewFile = id => {\n    history.push(`/file/${id}`);\n  };\n\n  useEffect(() => {\n    GetFile();\n  }, []); //----------------------------------------------------------------\n\n  const [value, setValue] = useState({\n    uname: ''\n  });\n\n  const handleOnChage = event => {\n    setValue({ ...value,\n      [event.target.name]: event.target.value\n    });\n  };\n\n  const searchByName = name => {\n    const url = '/user/' + name;\n    history.push(`${url}`);\n  }; //----------------------------------------------------------------\n\n\n  const [category, setCategory] = useState({\n    category: ''\n  });\n\n  const handleOnChageCategory = event => {\n    setCategory({ ...category,\n      [event.target.name]: event.target.value\n    });\n  };\n\n  const searchByCategory = category => {\n    const url = '/category/' + category;\n    history.push(`${url}`);\n  }; //----------------------------------------------------------------\n\n\n  const uploadFile = () => {\n    if (localStorage.getItem('username') === null) {\n      alert('You need to log in to upload files');\n    } else {\n      history.push('/upload');\n    }\n  }; //----------------------------------------------------------------\n\n\n  function FormRow() {\n    return /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: data.map(element => {\n        return /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 4,\n          children: /*#__PURE__*/_jsxDEV(Paper, {\n            className: \"box\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"File Name: \", element.name]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"User: \", element.userName]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"Comment: \", element.comment]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              className: \"btn-download\",\n              onClick: () => downLoad(element.id),\n              children: \"DownLoad\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              className: \"btn-download\",\n              onClick: () => viewFile(element.id),\n              children: \"View File\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 25\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }, this);\n  }\n\n  const handleOnchage = async (event, newPage) => {\n    setPage(newPage);\n\n    if (name || size > 0) {\n      var _resp$data;\n\n      const resp = await Http.getSth(`/files/results?name=${name}&size=${size}&page=${page}`);\n      setData(resp === null || resp === void 0 ? void 0 : (_resp$data = resp.data) === null || _resp$data === void 0 ? void 0 : _resp$data.fileModel);\n    } else {\n      var _resp$data2;\n\n      const resp = await Http.getSth(`/files?page=${newPage}`);\n      setData(resp === null || resp === void 0 ? void 0 : (_resp$data2 = resp.data) === null || _resp$data2 === void 0 ? void 0 : _resp$data2.fileModel);\n    }\n  };\n\n  const handleSearchName = async event => {\n    const {\n      value\n    } = event.target;\n\n    if (value) {\n      var _resp$data3;\n\n      setName(value);\n      const resp = await Http.getSth(`/files/results?name=${value}&size=${size}&page=${page}`);\n      let page1 = Math.ceil(resp.data.count / 6);\n      setCount(page1);\n      setData(resp === null || resp === void 0 ? void 0 : (_resp$data3 = resp.data) === null || _resp$data3 === void 0 ? void 0 : _resp$data3.fileModel);\n    } else {\n      if (size > 0) {} else {\n        GetFile();\n      }\n    }\n  };\n\n  const handleSearchSize = async event => {\n    const {\n      value\n    } = event.target;\n\n    if (value > 0) {\n      var _resp$data4;\n\n      setSize(value);\n      const resp = await Http.getSth(`/files/results?name=${name}&size=${value}&page=${page}`);\n      let page1 = Math.ceil(resp.data.count / 6);\n      setCount(page1);\n      setData(resp === null || resp === void 0 ? void 0 : (_resp$data4 = resp.data) === null || _resp$data4 === void 0 ? void 0 : _resp$data4.fileModel);\n    } else {\n      if (name) {} else {\n        GetFile();\n      }\n    }\n  }; // const handleSearchNameAndSize = async (event) => {\n  //     const { value } = event.target;\n  //     let data = {\n  //         name: '',\n  //         size: 0,\n  //     }\n  //     if (typeof(event.target.name) === 'string') {\n  //         data.name = value;\n  //     } else {\n  //         data.size = value;\n  //     }\n  //     console.log(data)\n  //     setVal({\n  //         ...val,\n  //         [event.target.name]: value\n  //     })\n  //     if (val.size > 0 || val.name) {           \n  //         const resp = await Http.getSth(`/files/results?name=${val.name}&size=${val.size}&page=${page}`);\n  //         let page1 = Math.ceil(resp.data.count / 6);\n  //         setCount(page1);\n  //         setData(resp?.data?.fileModel)\n  //     } else {\n  //         GetFile();\n  //     }\n  // }\n\n\n  return /*#__PURE__*/_jsxDEV(StyleFileIndex, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"file-view container-fluid\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          className: \"btn-upload\",\n          onClick: uploadFile,\n          children: \"UpLoad File\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container-fluid row search-box\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"searchByName col-sm\",\n          children: [/*#__PURE__*/_jsxDEV(TextField, {\n            id: \"outlined-basic\",\n            label: \"Search By User Name\",\n            variant: \"outlined\",\n            onChange: handleOnChage,\n            value: value.uname,\n            name: \"uname\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            className: \"btn-search\",\n            onClick: () => searchByName(value.uname),\n            children: \"Search\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"searchByCategory col-sm\",\n          children: [/*#__PURE__*/_jsxDEV(TextField, {\n            id: \"outlined-basic\",\n            label: \"Search By Category\",\n            variant: \"outlined\",\n            onChange: handleOnChageCategory,\n            value: category.category,\n            name: \"category\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            className: \"btn-search\",\n            onClick: () => searchByCategory(category.category),\n            children: \"Search\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"searchByName col-sm\",\n          children: /*#__PURE__*/_jsxDEV(TextField, {\n            id: \"outlined-basic\",\n            label: \"Search By Name\",\n            variant: \"outlined\",\n            onChange: handleSearchName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"searchByName col-sm\",\n          children: /*#__PURE__*/_jsxDEV(TextField, {\n            id: \"outlined-basic\",\n            label: \"Search By Size\",\n            variant: \"outlined\",\n            onChange: handleSearchSize,\n            type: \"number\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: 1,\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          item: true,\n          xs: 12,\n          spacing: 2,\n          children: /*#__PURE__*/_jsxDEV(FormRow, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row d-flex justify-content-center mt-5\",\n        children: /*#__PURE__*/_jsxDEV(Pagination, {\n          count: count,\n          onChange: handleOnchage,\n          page: page\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 187,\n    columnNumber: 9\n  }, this);\n};\n\n_s(FileIndex, \"FdjYSU6j0SQkBnR9h3oxhdHRy10=\", false, function () {\n  return [useHistory];\n});\n\n_c = FileIndex;\nexport default FileIndex;\n\nvar _c;\n\n$RefreshReg$(_c, \"FileIndex\");","map":{"version":3,"sources":["D:/MSF/MSF-FRONTEND/lib/src/components/files/FileIndex.js"],"names":["React","useState","useEffect","Http","StyleFileIndex","Paper","Grid","Button","useHistory","TextField","Pagination","FileIndex","props","history","data","setData","count","setCount","page","setPage","name","setName","size","setSize","val","setVal","GetFile","resp","getSth","fileModel","Math","floor","downLoad","id","localStorage","getItem","alert","push","url","window","open","viewFile","value","setValue","uname","handleOnChage","event","target","searchByName","category","setCategory","handleOnChageCategory","searchByCategory","uploadFile","FormRow","map","element","userName","comment","handleOnchage","newPage","handleSearchName","page1","ceil","handleSearchSize"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Http from '../../http/apiService';\r\nimport { StyleFileIndex } from './StyleFileIndex'\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport { Button } from '@material-ui/core';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { TextField } from '@material-ui/core';\r\nimport Pagination from '@material-ui/lab/Pagination';\r\n\r\nconst FileIndex = (props) => {\r\n    let history = useHistory();\r\n    const [data, setData] = useState([]);\r\n    const [count, setCount] = useState();\r\n    const [page, setPage] = useState(1);\r\n    const [name, setName] = useState('');\r\n    const [size, setSize] = useState(0);\r\n    const [val, setVal] = useState({\r\n        name: '',\r\n        size: 0\r\n    });\r\n    const GetFile = async () => {\r\n        const resp = await Http.getSth('/files?page=1')\r\n        setData(resp.data.fileModel);\r\n        let page = Math.floor(resp.data.count / 6);\r\n        if (resp.data.count % 6 !== 0) {\r\n            page = page + 1;\r\n        }\r\n        setCount(page);\r\n    }\r\n\r\n    const downLoad = async (id) => {\r\n        if (localStorage.getItem('username') === null) {\r\n            alert('You need to log in to download files')\r\n            history.push('/');\r\n        } else {\r\n            const url = 'http://localhost:9191/files/' + localStorage.getItem('username') + '/download/' + id;\r\n            window.open(url, \"_blank\");\r\n        }\r\n    }\r\n\r\n    const viewFile = (id) => {\r\n        history.push(`/file/${id}`);\r\n    }\r\n\r\n    useEffect(() => {\r\n        GetFile();\r\n    }, []);\r\n\r\n    //----------------------------------------------------------------\r\n    const [value, setValue] = useState({\r\n        uname: '',\r\n    });\r\n    const handleOnChage = (event) => {\r\n        setValue({\r\n            ...value,\r\n            [event.target.name]: event.target.value,\r\n\r\n        })\r\n    }\r\n    const searchByName = (name) => {\r\n        const url = '/user/' + name;\r\n        history.push(`${url}`);\r\n    }\r\n    //----------------------------------------------------------------\r\n    const [category, setCategory] = useState({\r\n        category: '',\r\n    });\r\n    const handleOnChageCategory = (event) => {\r\n        setCategory({\r\n            ...category,\r\n            [event.target.name]: event.target.value,\r\n\r\n        })\r\n    }\r\n    const searchByCategory = (category) => {\r\n        const url = '/category/' + category;\r\n        history.push(`${url}`);\r\n    }\r\n\r\n    //----------------------------------------------------------------\r\n\r\n    const uploadFile = () => {\r\n        if (localStorage.getItem('username') === null) {\r\n            alert('You need to log in to upload files')\r\n        } else {\r\n            history.push('/upload')\r\n        }\r\n    }\r\n\r\n    //----------------------------------------------------------------\r\n    function FormRow() {\r\n        return (\r\n            <React.Fragment>\r\n                {data.map((element) => {\r\n                    return (\r\n                        <Grid item xs={4}>\r\n                            <Paper className=\"box\">\r\n                                <p>File Name: {element.name}</p>\r\n                                <p>User: {element.userName}</p>\r\n                                <p>Comment: {element.comment}</p>\r\n                                <Button className=\"btn-download\" onClick={() => downLoad(element.id)}>DownLoad</Button>\r\n                                <Button className=\"btn-download\" onClick={() => viewFile(element.id)}>View File</Button>\r\n                            </Paper>\r\n                        </Grid>\r\n                    )\r\n                }\r\n                )\r\n                }\r\n            </React.Fragment>\r\n        );\r\n    }\r\n\r\n    const handleOnchage = async (event, newPage) => {\r\n        setPage(newPage);\r\n        if (name || size > 0) {\r\n            const resp = await Http.getSth(`/files/results?name=${name}&size=${size}&page=${page}`);\r\n            setData(resp?.data?.fileModel)\r\n        } else {\r\n            const resp = await Http.getSth(`/files?page=${newPage}`);\r\n            setData(resp?.data?.fileModel);\r\n        }\r\n\r\n    }\r\n    const handleSearchName = async (event) => {\r\n        const { value } = event.target;\r\n        if (value) {\r\n            setName(value);\r\n            const resp = await Http.getSth(`/files/results?name=${value}&size=${size}&page=${page}`);\r\n            let page1 = Math.ceil(resp.data.count / 6);\r\n            setCount(page1);\r\n            setData(resp?.data?.fileModel)\r\n        } else {\r\n            if (size > 0) {\r\n                \r\n            }\r\n            else {\r\n                GetFile();\r\n            }\r\n        }\r\n    }\r\n    const handleSearchSize = async (event) => {\r\n        const { value } = event.target;\r\n        if (value > 0) {\r\n            setSize(value);\r\n            const resp = await Http.getSth(`/files/results?name=${name}&size=${value}&page=${page}`);\r\n            let page1 = Math.ceil(resp.data.count / 6);\r\n            setCount(page1);\r\n            setData(resp?.data?.fileModel)\r\n        } else {\r\n            if (name) {\r\n                \r\n            }\r\n            else {\r\n                GetFile();\r\n            }\r\n        }\r\n    }\r\n\r\n    // const handleSearchNameAndSize = async (event) => {\r\n    //     const { value } = event.target;\r\n    //     let data = {\r\n    //         name: '',\r\n    //         size: 0,\r\n    //     }\r\n    //     if (typeof(event.target.name) === 'string') {\r\n    //         data.name = value;\r\n    //     } else {\r\n    //         data.size = value;\r\n    //     }\r\n    //     console.log(data)\r\n    //     setVal({\r\n    //         ...val,\r\n    //         [event.target.name]: value\r\n    //     })\r\n    //     if (val.size > 0 || val.name) {           \r\n    //         const resp = await Http.getSth(`/files/results?name=${val.name}&size=${val.size}&page=${page}`);\r\n    //         let page1 = Math.ceil(resp.data.count / 6);\r\n    //         setCount(page1);\r\n    //         setData(resp?.data?.fileModel)\r\n    //     } else {\r\n    //         GetFile();\r\n    //     }\r\n    // }\r\n\r\n    return (\r\n        <StyleFileIndex >\r\n            <div className=\"file-view container-fluid\">\r\n                <div>\r\n                    <Button variant=\"contained\" className=\"btn-upload\" onClick={uploadFile}>UpLoad File</Button>\r\n                </div>\r\n                <div className=\"container-fluid row search-box\">\r\n                    <div className=\"searchByName col-sm\">\r\n                        <TextField id=\"outlined-basic\" label=\"Search By User Name\" variant=\"outlined\" onChange={handleOnChage} value={value.uname} name=\"uname\" />\r\n                        <Button className=\"btn-search\" onClick={() => searchByName(value.uname)} >Search</Button>\r\n                    </div>\r\n\r\n                    <div className=\"searchByCategory col-sm\">\r\n                        <TextField id=\"outlined-basic\" label=\"Search By Category\" variant=\"outlined\" onChange={handleOnChageCategory} value={category.category} name=\"category\" />\r\n                        <Button className=\"btn-search\" onClick={() => searchByCategory(category.category)} >Search</Button>\r\n                    </div>\r\n\r\n                    <div className=\"searchByName col-sm\">\r\n                        <TextField id=\"outlined-basic\" label=\"Search By Name\" variant=\"outlined\" onChange={handleSearchName} />\r\n                    </div>\r\n\r\n                    <div className=\"searchByName col-sm\">\r\n                        <TextField id=\"outlined-basic\" label=\"Search By Size\" variant=\"outlined\" onChange={handleSearchSize} type=\"number\" />\r\n                    </div>\r\n\r\n                </div>\r\n                <Grid container spacing={1}>\r\n                    <Grid container item xs={12} spacing={2}>\r\n                        <FormRow />\r\n                    </Grid>\r\n                </Grid>\r\n                <div className=\"row d-flex justify-content-center mt-5\">\r\n                    <Pagination count={count} onChange={handleOnchage} page={page} />\r\n                </div>\r\n            </div>\r\n        </StyleFileIndex>\r\n    )\r\n}\r\n\r\n\r\nexport default FileIndex;"]},"metadata":{},"sourceType":"module"}