{"ast":null,"code":"var _jsxFileName = \"D:\\\\MSF\\\\MSF-FRONTEND\\\\lib\\\\src\\\\components\\\\files\\\\FileIndex.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport Http from '../../http/apiService';\nimport { StyleFileIndex } from './StyleFileIndex';\nimport Paper from '@material-ui/core/Paper';\nimport Grid from '@material-ui/core/Grid';\nimport { Button } from '@material-ui/core';\nimport { useHistory } from \"react-router-dom\";\nimport { TextField } from '@material-ui/core';\nimport Pagination from '@material-ui/lab/Pagination';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst FileIndex = props => {\n  _s();\n\n  let history = useHistory();\n  const [data, setData] = useState([]);\n  const [count, setCount] = useState();\n  const [page, setPage] = useState(1);\n\n  const GetFile = async () => {\n    const resp = await Http.getSth('/files?page=1');\n    setData(resp.data.fileModel);\n    let page = Math.floor(resp.data.count / 6);\n\n    if (resp.data.count % 6 !== 0) {\n      page = page + 1;\n    }\n\n    setCount(page);\n    console.log(resp.data.fileModel);\n  };\n\n  const downLoad = async id => {\n    if (localStorage.getItem('username') === null) {\n      alert('You need to log in to download files');\n      history.push('/');\n    } else {\n      const url = 'http://localhost:9191/files/' + localStorage.getItem('username') + '/download/' + id;\n      window.open(url, \"_blank\");\n    }\n  };\n\n  const viewFile = id => {\n    history.push(`/file/${id}`);\n  };\n\n  useEffect(() => {\n    GetFile();\n  }, []); //----------------------------------------------------------------\n\n  const [value, setValue] = useState({\n    uname: ''\n  });\n\n  const handleOnChage = event => {\n    setValue({ ...value,\n      [event.target.name]: event.target.value\n    });\n  };\n\n  const searchByName = name => {\n    const url = '/user/' + name;\n    history.push(`${url}`);\n  }; //----------------------------------------------------------------\n\n\n  const [category, setCategory] = useState({\n    category: ''\n  });\n\n  const handleOnChageCategory = event => {\n    setCategory({ ...category,\n      [event.target.name]: event.target.value\n    });\n  };\n\n  const searchByCategory = category => {\n    const url = '/category/' + category;\n    history.push(`${url}`);\n  }; //----------------------------------------------------------------\n\n\n  const uploadFile = () => {\n    if (localStorage.getItem('username') === null) {\n      alert('You need to log in to upload files');\n    } else {\n      history.push('/upload');\n    }\n  }; //----------------------------------------------------------------\n\n\n  function FormRow() {\n    return /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: data.map(element => {\n        return /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 4,\n          children: /*#__PURE__*/_jsxDEV(Paper, {\n            className: \"box\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"File Name: \", element.name]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"User: \", element.userName]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"Comment: \", element.comment]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              className: \"btn-download\",\n              onClick: () => downLoad(element.id),\n              children: \"DownLoad\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              className: \"btn-download\",\n              onClick: () => viewFile(element.id),\n              children: \"View File\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 25\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }, this);\n  }\n\n  const handleOnchage = async (event, newPage) => {\n    set;\n    const resp = await Http.getSth(`/files?page=${newPage}`);\n\n    if (resp.data) {\n      setData(resp.data.fileModel);\n    }\n  };\n\n  const handleSearchName = async event => {\n    var _resp$data;\n\n    const {\n      value\n    } = event.target;\n    const resp = await Http.getSth(`/files/results?name=${value}&page=1`);\n    setData(resp === null || resp === void 0 ? void 0 : (_resp$data = resp.data) === null || _resp$data === void 0 ? void 0 : _resp$data.fileModel);\n    console.log(resp);\n  };\n\n  return /*#__PURE__*/_jsxDEV(StyleFileIndex, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"file-view container-fluid\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          className: \"btn-upload\",\n          onClick: uploadFile,\n          children: \"UpLoad File\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container-fluid row search-box\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"searchByName col-sm\",\n          children: [/*#__PURE__*/_jsxDEV(TextField, {\n            id: \"outlined-basic\",\n            label: \"Search By User Name\",\n            variant: \"outlined\",\n            onChange: handleOnChage,\n            value: value.uname,\n            name: \"uname\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            className: \"btn-search\",\n            onClick: () => searchByName(value.uname),\n            children: \"Search\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"searchByCategory col-sm\",\n          children: [/*#__PURE__*/_jsxDEV(TextField, {\n            id: \"outlined-basic\",\n            label: \"Search By Category\",\n            variant: \"outlined\",\n            onChange: handleOnChageCategory,\n            value: category.category,\n            name: \"category\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            className: \"btn-search\",\n            onClick: () => searchByCategory(category.category),\n            children: \"Search\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"searchByName col-sm\",\n          children: /*#__PURE__*/_jsxDEV(TextField, {\n            id: \"outlined-basic\",\n            label: \"Search By Name\",\n            variant: \"outlined\",\n            onChange: handleSearchName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"searchByName col-sm\",\n          children: /*#__PURE__*/_jsxDEV(TextField, {\n            id: \"outlined-basic\",\n            label: \"Search By Size\",\n            variant: \"outlined\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: 1,\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          item: true,\n          xs: 12,\n          spacing: 2,\n          children: /*#__PURE__*/_jsxDEV(FormRow, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row d-flex justify-content-center mt-5\",\n        children: /*#__PURE__*/_jsxDEV(Pagination, {\n          count: count,\n          onChange: handleOnchage,\n          page: page\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 123,\n    columnNumber: 9\n  }, this);\n};\n\n_s(FileIndex, \"qaA75bQAhbzdlYxZKpM7o9cC33o=\", false, function () {\n  return [useHistory];\n});\n\n_c = FileIndex;\nexport default FileIndex;\n\nvar _c;\n\n$RefreshReg$(_c, \"FileIndex\");","map":{"version":3,"sources":["D:/MSF/MSF-FRONTEND/lib/src/components/files/FileIndex.js"],"names":["React","useState","useEffect","Http","StyleFileIndex","Paper","Grid","Button","useHistory","TextField","Pagination","FileIndex","props","history","data","setData","count","setCount","page","setPage","GetFile","resp","getSth","fileModel","Math","floor","console","log","downLoad","id","localStorage","getItem","alert","push","url","window","open","viewFile","value","setValue","uname","handleOnChage","event","target","name","searchByName","category","setCategory","handleOnChageCategory","searchByCategory","uploadFile","FormRow","map","element","userName","comment","handleOnchage","newPage","set","handleSearchName"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Http from '../../http/apiService';\r\nimport { StyleFileIndex } from './StyleFileIndex'\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport { Button } from '@material-ui/core';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport {TextField} from '@material-ui/core';\r\nimport Pagination from '@material-ui/lab/Pagination';\r\n\r\nconst FileIndex = (props) => {\r\n    let history = useHistory();\r\n    const [data, setData] = useState([]);\r\n    const [count, setCount] = useState();\r\n    const [page, setPage] = useState(1);\r\n    const GetFile = async () => {\r\n        const resp = await Http.getSth('/files?page=1')\r\n        setData(resp.data.fileModel);\r\n        let page =Math.floor(resp.data.count/6);\r\n        if(resp.data.count%6 !== 0){\r\n            page = page +1;\r\n        } \r\n        setCount(page);\r\n        console.log(resp.data.fileModel);\r\n    }\r\n\r\n    const downLoad = async (id) => {\r\n        if (localStorage.getItem('username') === null) {\r\n            alert('You need to log in to download files')\r\n            history.push('/');\r\n        } else {\r\n            const url = 'http://localhost:9191/files/'+localStorage.getItem('username')+'/download/' + id;\r\n            window.open(url, \"_blank\");\r\n        }\r\n    }\r\n\r\n    const viewFile = (id) => {\r\n        history.push(`/file/${id}`);\r\n    }\r\n\r\n    useEffect(() => {\r\n        GetFile();\r\n    }, []);\r\n\r\n    //----------------------------------------------------------------\r\n    const [value, setValue] = useState({\r\n        uname: '',\r\n    });\r\n    const handleOnChage = (event) => {\r\n        setValue({\r\n            ...value,\r\n            [event.target.name]: event.target.value,\r\n                        \r\n        })\r\n    }\r\n    const searchByName = (name) => {\r\n        const url = '/user/' + name;\r\n        history.push(`${url}`);\r\n    }\r\n    //----------------------------------------------------------------\r\n    const [category, setCategory] = useState({\r\n        category: '',\r\n    });\r\n    const handleOnChageCategory = (event) => {\r\n        setCategory({\r\n            ...category,\r\n            [event.target.name]: event.target.value,\r\n                        \r\n        })\r\n    }\r\n    const searchByCategory = (category) => {\r\n        const url = '/category/' + category;\r\n        history.push(`${url}`);\r\n    }\r\n\r\n    //----------------------------------------------------------------\r\n\r\n    const uploadFile =()=>{\r\n        if(localStorage.getItem('username') === null){\r\n            alert('You need to log in to upload files')\r\n        }else{\r\n            history.push('/upload')\r\n        }\r\n    }\r\n\r\n    //----------------------------------------------------------------\r\n    function FormRow() {\r\n        return (\r\n            <React.Fragment>\r\n                {data.map((element) => {\r\n                    return (\r\n                        <Grid item xs={4}>\r\n                            <Paper className=\"box\">\r\n                                <p>File Name: {element.name}</p>\r\n                                <p>User: {element.userName}</p>\r\n                                <p>Comment: {element.comment}</p>\r\n                                <Button className=\"btn-download\" onClick={() => downLoad(element.id)}>DownLoad</Button>\r\n                                <Button className=\"btn-download\" onClick={() => viewFile(element.id)}>View File</Button>\r\n                            </Paper>\r\n                        </Grid>\r\n                    )\r\n                }\r\n                )\r\n                }\r\n            </React.Fragment>\r\n        );\r\n    }\r\n\r\n    const handleOnchage =  async(event, newPage) => {\r\n        set\r\n        const resp = await Http.getSth(`/files?page=${newPage}`);\r\n        if (resp.data) {\r\n            setData(resp.data.fileModel );\r\n        }\r\n    }\r\n    const handleSearchName = async (event) => {\r\n        const {value} = event.target;\r\n        const resp = await Http.getSth(`/files/results?name=${value}&page=1`);\r\n        setData(resp?.data?.fileModel)\r\n        console.log(resp)\r\n    }\r\n    return (\r\n        <StyleFileIndex >\r\n            <div className=\"file-view container-fluid\">\r\n                <div>\r\n                <Button variant=\"contained\" className=\"btn-upload\" onClick={uploadFile}>UpLoad File</Button>\r\n                </div>\r\n                <div className=\"container-fluid row search-box\">\r\n                    <div className=\"searchByName col-sm\">\r\n                        <TextField id=\"outlined-basic\" label=\"Search By User Name\" variant=\"outlined\" onChange={handleOnChage} value={value.uname} name=\"uname\" />\r\n                        <Button className=\"btn-search\" onClick={() => searchByName(value.uname)} >Search</Button>\r\n                    </div>\r\n\r\n                    <div className=\"searchByCategory col-sm\">\r\n                        <TextField id=\"outlined-basic\" label=\"Search By Category\" variant=\"outlined\" onChange={handleOnChageCategory} value={category.category} name=\"category\" />\r\n                        <Button className=\"btn-search\" onClick={() => searchByCategory(category.category)} >Search</Button>\r\n                    </div>\r\n\r\n                    <div className=\"searchByName col-sm\">\r\n                        <TextField id=\"outlined-basic\" label=\"Search By Name\" variant=\"outlined\" onChange={handleSearchName}  />\r\n                    </div>\r\n\r\n                    <div className=\"searchByName col-sm\">\r\n                        <TextField id=\"outlined-basic\" label=\"Search By Size\" variant=\"outlined\" />\r\n                    </div>\r\n                    \r\n                </div>\r\n                <Grid container spacing={1}>\r\n                    <Grid container item xs={12} spacing={2}>\r\n                        <FormRow />\r\n                    </Grid>\r\n                </Grid>\r\n                <div className=\"row d-flex justify-content-center mt-5\">\r\n                    <Pagination count={count} onChange={handleOnchage} page={page} />\r\n                </div>\r\n            </div>\r\n        </StyleFileIndex>\r\n    )\r\n}\r\n\r\n\r\nexport default FileIndex;"]},"metadata":{},"sourceType":"module"}